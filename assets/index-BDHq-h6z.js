import{d as y,r as C,s as E,o as S,c as I,a as b,_ as L,b as M,t as _,e as k,f as x,w as W,g as N,h as O}from"./index-kEUqBE1g.js";var R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var P={exports:{}};(function(d,m){(function(f,u){d.exports=u()})(R,function(){function f(e){var l=[];return e.AMapUI&&l.push(u(e.AMapUI)),e.Loca&&l.push(v(e.Loca)),Promise.all(l)}function u(e){return new Promise(function(l,a){var s=[];if(e.plugins)for(var i=0;i<e.plugins.length;i+=1)n.AMapUI.plugins.indexOf(e.plugins[i])==-1&&s.push(e.plugins[i]);if(t.AMapUI===o.failed)a("前次请求 AMapUI 失败");else if(t.AMapUI===o.notload){t.AMapUI=o.loading,n.AMapUI.version=e.version||n.AMapUI.version,i=n.AMapUI.version;var c=document.body||document.head,p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/ui/"+i+"/main.js",p.onerror=function(r){t.AMapUI=o.failed,a("请求 AMapUI 失败")},p.onload=function(){if(t.AMapUI=o.loaded,s.length)window.AMapUI.loadUI(s,function(){for(var r=0,w=s.length;r<w;r++){var h=s[r].split("/").slice(-1)[0];window.AMapUI[h]=arguments[r]}for(l();A.AMapUI.length;)A.AMapUI.splice(0,1)[0]()});else for(l();A.AMapUI.length;)A.AMapUI.splice(0,1)[0]()},c.appendChild(p)}else t.AMapUI===o.loaded?e.version&&e.version!==n.AMapUI.version?a("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,function(){for(var r=0,w=s.length;r<w;r++){var h=s[r].split("/").slice(-1)[0];window.AMapUI[h]=arguments[r]}l()}):l():e.version&&e.version!==n.AMapUI.version?a("不允许多个版本 AMapUI 混用"):A.AMapUI.push(function(r){r?a(r):s.length?window.AMapUI.loadUI(s,function(){for(var w=0,h=s.length;w<h;w++){var j=s[w].split("/").slice(-1)[0];window.AMapUI[j]=arguments[w]}l()}):l()})})}function v(e){return new Promise(function(l,a){if(t.Loca===o.failed)a("前次请求 Loca 失败");else if(t.Loca===o.notload){t.Loca=o.loading,n.Loca.version=e.version||n.Loca.version;var s=n.Loca.version,i=n.AMap.version.startsWith("2"),c=s.startsWith("2");if(i&&!c||!i&&c)a("JSAPI 与 Loca 版本不对应！！");else{i=n.key,c=document.body||document.head;var p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/loca?v="+s+"&key="+i,p.onerror=function(r){t.Loca=o.failed,a("请求 AMapUI 失败")},p.onload=function(){for(t.Loca=o.loaded,l();A.Loca.length;)A.Loca.splice(0,1)[0]()},c.appendChild(p)}}else t.Loca===o.loaded?e.version&&e.version!==n.Loca.version?a("不允许多个版本 Loca 混用"):l():e.version&&e.version!==n.Loca.version?a("不允许多个版本 Loca 混用"):A.Loca.push(function(r){r?a(r):a()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(o||(o={}));var n={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},A={AMapUI:[],Loca:[]},g=[],U=function(e){typeof e=="function"&&(t.AMap===o.loaded?e(window.AMap):g.push(e))};return{load:function(e){return new Promise(function(l,a){if(t.AMap==o.failed)a("");else if(t.AMap==o.notload){var s=e.key,i=e.version,c=e.plugins;s?(window.AMap&&location.host!=="lbs.amap.com"&&a("禁止多种API加载方式混用"),n.key=s,n.AMap.version=i||n.AMap.version,n.AMap.plugins=c||n.AMap.plugins,t.AMap=o.loading,i=document.body||document.head,window.___onAPILoaded=function(r){if(delete window.___onAPILoaded,r)t.AMap=o.failed,a(r);else for(t.AMap=o.loaded,f(e).then(function(){l(window.AMap)}).catch(a);g.length;)g.splice(0,1)[0]()},c=document.createElement("script"),c.type="text/javascript",c.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+n.AMap.version+"&key="+s+"&plugin="+n.AMap.plugins.join(","),c.onerror=function(r){t.AMap=o.failed,a(r)},i.appendChild(c)):a("请填写key")}else if(t.AMap==o.loaded)if(e.key&&e.key!==n.key)a("多个不一致的 key");else if(e.version&&e.version!==n.AMap.version)a("不允许多个版本 JSAPI 混用");else{if(s=[],e.plugins)for(i=0;i<e.plugins.length;i+=1)n.AMap.plugins.indexOf(e.plugins[i])==-1&&s.push(e.plugins[i]);s.length?window.AMap.plugin(s,function(){f(e).then(function(){l(window.AMap)}).catch(a)}):f(e).then(function(){l(window.AMap)}).catch(a)}else if(e.key&&e.key!==n.key)a("多个不一致的 key");else if(e.version&&e.version!==n.AMap.version)a("不允许多个版本 JSAPI 混用");else{var p=[];if(e.plugins)for(i=0;i<e.plugins.length;i+=1)n.AMap.plugins.indexOf(e.plugins[i])==-1&&p.push(e.plugins[i]);U(function(){p.length?window.AMap.plugin(p,function(){f(e).then(function(){l(window.AMap)}).catch(a)}):f(e).then(function(){l(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,n={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},A={AMap:[],AMapUI:[],Loca:[]}}}})})(P);var V=P.exports;const $=T(V),B=y({__name:"AMap",setup(d,{expose:m}){const f=C(),u=E();return S(()=>{$.load({key:"4ab053278e0ef0451e6dc044314d58ae",version:"1.4.15"}).then(v=>{u.value=new v.Map(f.value,{mapStyle:"light"})})}),m({map:u}),(v,o)=>(b(),I("div",{ref_key:"containerRef",ref:f,id:"map-container"},null,512))}}),J=L(B,[["__scopeId","data-v-367197cf"]]),D={class:"container"},F={class:"content-wrapper"},q=["src"],z={class:"name"},G={class:"info"},H={class:"info"},Z={key:0},K=["href"],Q={key:1},X=y({__name:"ServicePopover",props:{storeName:{},pictureUrl:{},address:{},telephone:{},infoWindow:{},fax:{}},setup(d){const m=d;return(f,u)=>(b(),I("div",D,[M("div",{class:"icon-close",onClick:u[0]||(u[0]=(...v)=>d.infoWindow.close&&d.infoWindow.close(...v))}),M("div",F,[M("img",{alt:"",src:m.pictureUrl,class:"picture"},null,8,q),M("div",null,[M("div",z,_(d.storeName),1),M("div",G,_(d.address),1),M("div",H,[d.telephone?(b(),I("p",Z,[u[1]||(u[1]=x(" 服务热线： ",-1)),M("a",{href:`tel:${d.telephone}`},_(d.telephone),9,K)])):k("",!0),d.fax?(b(),I("p",Q,[u[2]||(u[2]=x(" 传真： ",-1)),M("a",null,_(d.fax),1)])):k("",!0)])])])]))}}),Y=L(X,[["__scopeId","data-v-1626b55c"]]),ee="/yahua/assets/logo-D9ZE_HPw.jpg",ne={class:"container"},oe=y({__name:"index",setup(d){const m=C(),f=[{id:1,storeName:"江苏亚华化工装备有限公司",pictureUrl:ee,address:"南通市港闸区陈桥街道沿港路（荣盛路）8号",lng:120.77539,lat:32.102447,telephone:"0513-80779670",fax:"0513-85696288"}];return W(()=>{var u;return(u=m.value)==null?void 0:u.map},u=>{const v=new window.AMap.InfoWindow({isCustom:!0,closeWhenClickMap:!0}),o=f.map(n=>{const t=new window.AMap.Marker({position:new window.AMap.LngLat(n.lng,n.lat),content:'<div class="map-marker"/>'});let A;return t.on("click",async()=>{A&&t.setContent('<div class="map-marker"/>'),A=t,u.panTo(t.getPosition()),t.setContent('<div class="map-marker active"/>');const g=document.createElement("div"),U=O(Y,{...n,infoWindow:v});U.mount(g),setTimeout(()=>{v.setContent(g),v.open(u,t.getPosition()),v.on("close",()=>{t.setContent('<div class="map-marker"/>'),U.unmount()})})}),t});u.plugin(["AMap.MarkerClusterer"],()=>{new window.AMap.MarkerClusterer(u,o,{zoomOnClick:!0,renderClusterMarker({marker:n,count:t}){n.setContent(`<div class="map-marker-cluster">${t}</div>`)}}),u.setFitView(o)})}),(u,v)=>(b(),I("div",ne,[N(J,{ref_key:"mapRef",ref:m},null,512)]))}}),ae=L(oe,[["__scopeId","data-v-03f40768"]]);export{ae as default};
