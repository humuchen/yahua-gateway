import{d as y,f as P,s as S,g as W,b as I,o as b,_ as L,e as M,t as _,h as k,i as x,j as N,a as O,k as V,l as $}from"./index-CR63uCWN.js";var R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var j={exports:{}};(function(r,m){(function(A,c){r.exports=c()})(R,function(){function A(e){var l=[];return e.AMapUI&&l.push(c(e.AMapUI)),e.Loca&&l.push(p(e.Loca)),Promise.all(l)}function c(e){return new Promise(function(l,a){var s=[];if(e.plugins)for(var i=0;i<e.plugins.length;i+=1)o.AMapUI.plugins.indexOf(e.plugins[i])==-1&&s.push(e.plugins[i]);if(t.AMapUI===n.failed)a("前次请求 AMapUI 失败");else if(t.AMapUI===n.notload){t.AMapUI=n.loading,o.AMapUI.version=e.version||o.AMapUI.version,i=o.AMapUI.version;var v=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/ui/"+i+"/main.js",f.onerror=function(u){t.AMapUI=n.failed,a("请求 AMapUI 失败")},f.onload=function(){if(t.AMapUI=n.loaded,s.length)window.AMapUI.loadUI(s,function(){for(var u=0,w=s.length;u<w;u++){var h=s[u].split("/").slice(-1)[0];window.AMapUI[h]=arguments[u]}for(l();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()});else for(l();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()},v.appendChild(f)}else t.AMapUI===n.loaded?e.version&&e.version!==o.AMapUI.version?a("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,function(){for(var u=0,w=s.length;u<w;u++){var h=s[u].split("/").slice(-1)[0];window.AMapUI[h]=arguments[u]}l()}):l():e.version&&e.version!==o.AMapUI.version?a("不允许多个版本 AMapUI 混用"):d.AMapUI.push(function(u){u?a(u):s.length?window.AMapUI.loadUI(s,function(){for(var w=0,h=s.length;w<h;w++){var E=s[w].split("/").slice(-1)[0];window.AMapUI[E]=arguments[w]}l()}):l()})})}function p(e){return new Promise(function(l,a){if(t.Loca===n.failed)a("前次请求 Loca 失败");else if(t.Loca===n.notload){t.Loca=n.loading,o.Loca.version=e.version||o.Loca.version;var s=o.Loca.version,i=o.AMap.version.startsWith("2"),v=s.startsWith("2");if(i&&!v||!i&&v)a("JSAPI 与 Loca 版本不对应！！");else{i=o.key,v=document.body||document.head;var f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/loca?v="+s+"&key="+i,f.onerror=function(u){t.Loca=n.failed,a("请求 AMapUI 失败")},f.onload=function(){for(t.Loca=n.loaded,l();d.Loca.length;)d.Loca.splice(0,1)[0]()},v.appendChild(f)}}else t.Loca===n.loaded?e.version&&e.version!==o.Loca.version?a("不允许多个版本 Loca 混用"):l():e.version&&e.version!==o.Loca.version?a("不允许多个版本 Loca 混用"):d.Loca.push(function(u){u?a(u):a()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var n;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(n||(n={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},d={AMapUI:[],Loca:[]},g=[],U=function(e){typeof e=="function"&&(t.AMap===n.loaded?e(window.AMap):g.push(e))};return{load:function(e){return new Promise(function(l,a){if(t.AMap==n.failed)a("");else if(t.AMap==n.notload){var s=e.key,i=e.version,v=e.plugins;s?(window.AMap&&location.host!=="lbs.amap.com"&&a("禁止多种API加载方式混用"),o.key=s,o.AMap.version=i||o.AMap.version,o.AMap.plugins=v||o.AMap.plugins,t.AMap=n.loading,i=document.body||document.head,window.___onAPILoaded=function(u){if(delete window.___onAPILoaded,u)t.AMap=n.failed,a(u);else for(t.AMap=n.loaded,A(e).then(function(){l(window.AMap)}).catch(a);g.length;)g.splice(0,1)[0]()},v=document.createElement("script"),v.type="text/javascript",v.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+s+"&plugin="+o.AMap.plugins.join(","),v.onerror=function(u){t.AMap=n.failed,a(u)},i.appendChild(v)):a("请填写key")}else if(t.AMap==n.loaded)if(e.key&&e.key!==o.key)a("多个不一致的 key");else if(e.version&&e.version!==o.AMap.version)a("不允许多个版本 JSAPI 混用");else{if(s=[],e.plugins)for(i=0;i<e.plugins.length;i+=1)o.AMap.plugins.indexOf(e.plugins[i])==-1&&s.push(e.plugins[i]);s.length?window.AMap.plugin(s,function(){A(e).then(function(){l(window.AMap)}).catch(a)}):A(e).then(function(){l(window.AMap)}).catch(a)}else if(e.key&&e.key!==o.key)a("多个不一致的 key");else if(e.version&&e.version!==o.AMap.version)a("不允许多个版本 JSAPI 混用");else{var f=[];if(e.plugins)for(i=0;i<e.plugins.length;i+=1)o.AMap.plugins.indexOf(e.plugins[i])==-1&&f.push(e.plugins[i]);U(function(){f.length?window.AMap.plugin(f,function(){A(e).then(function(){l(window.AMap)}).catch(a)}):A(e).then(function(){l(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},d={AMap:[],AMapUI:[],Loca:[]}}}})})(j);var B=j.exports;const J=T(B),D=y({__name:"AMap",setup(r,{expose:m}){const A=P(),c=S();return W(()=>{J.load({key:"4ab053278e0ef0451e6dc044314d58ae",version:"1.4.15"}).then(p=>{c.value=new p.Map(A.value,{mapStyle:"light"})})}),m({map:c}),(p,n)=>(b(),I("div",{ref_key:"containerRef",ref:A,id:"map-container"},null,512))}}),F=L(D,[["__scopeId","data-v-367197cf"]]),q={class:"container"},z={class:"content-wrapper"},G=["src"],H={class:"name"},Z={class:"info"},K={class:"info"},Q={key:0},X=["href"],Y={key:1},ee=y({__name:"ServicePopover",props:{storeName:{},pictureUrl:{},address:{},telephone:{},infoWindow:{},fax:{}},setup(r){const m=r;return(A,c)=>(b(),I("div",q,[M("div",{class:"icon-close",onClick:c[0]||(c[0]=(...p)=>r.infoWindow.close&&r.infoWindow.close(...p))}),M("div",z,[M("img",{alt:"",src:m.pictureUrl,class:"picture"},null,8,G),M("div",null,[M("div",H,_(r.storeName),1),M("div",Z,_(r.address),1),M("div",K,[r.telephone?(b(),I("p",Q,[c[1]||(c[1]=x(" 服务热线： ",-1)),M("a",{href:`tel:${r.telephone}`},_(r.telephone),9,X)])):k("",!0),r.fax?(b(),I("p",Y,[c[2]||(c[2]=x(" 传真： ",-1)),M("a",null,_(r.fax),1)])):k("",!0)])])])]))}}),ne=L(ee,[["__scopeId","data-v-1626b55c"]]),C="/yahua/assets/logo-D9ZE_HPw.jpg",oe={class:"container"},ae=y({__name:"index",setup(r){V(p=>({v4217fda5:c}));const m=P(),A=[{id:1,storeName:"江苏亚华化工装备有限公司",pictureUrl:C,address:"南通市港闸区陈桥街道沿港路（荣盛路）8号",lng:120.77539,lat:32.102447,telephone:"0513-80779670",fax:"0513-85696288"}],c=`url(${C}) no-repeat 50%`;return N(()=>{var p;return(p=m.value)==null?void 0:p.map},p=>{const n=new window.AMap.InfoWindow({isCustom:!0,closeWhenClickMap:!0}),o=A.map(t=>{const d=new window.AMap.Marker({position:new window.AMap.LngLat(t.lng,t.lat),content:'<div class="map-marker"/>'});let g;return d.on("click",async()=>{g&&d.setContent('<div class="map-marker"/>'),g=d,p.panTo(d.getPosition()),d.setContent('<div class="map-marker active"/>');const U=document.createElement("div"),e=$(ne,{...t,infoWindow:n});e.mount(U),setTimeout(()=>{n.setContent(U),n.open(p,d.getPosition()),n.on("close",()=>{d.setContent('<div class="map-marker"/>'),e.unmount()})})}),d});p.plugin(["AMap.MarkerClusterer"],()=>{new window.AMap.MarkerClusterer(p,o,{zoomOnClick:!0,renderClusterMarker({marker:t,count:d}){t.setContent(`<div class="map-marker-cluster">${d}</div>`)}}),p.setFitView(o)})}),(p,n)=>(b(),I("div",oe,[O(F,{ref_key:"mapRef",ref:m},null,512)]))}}),ie=L(ae,[["__scopeId","data-v-2b8b10d4"]]);export{ie as default};
